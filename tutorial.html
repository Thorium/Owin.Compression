<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Using this library (C-Sharp)
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="author" content="">

    <link rel="stylesheet" id="theme_link" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/4.6.0/materia/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns" crossorigin="anonymous"></script>

    <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>

    <link rel="shortcut icon" type="image/x-icon" href="img/favicon.ico">
    <link type="text/css" rel="stylesheet" href="/Owin.Compression/content/navbar-fixed-right.css" />
    <link type="text/css" rel="stylesheet" href="/Owin.Compression/content/fsdocs-default.css" />
    <link type="text/css" rel="stylesheet" href="/Owin.Compression/content/fsdocs-custom.css" />
    <script type="text/javascript" src="/Owin.Compression/content/fsdocs-tips.js"></script>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!-- BEGIN SEARCH BOX: this adds support for the search box -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/JavaScript-autoComplete/1.0.4/auto-complete.css" />
    <!-- END SEARCH BOX: this adds support for the search box -->
    
</head>

<body>
    <nav class="navbar navbar-expand-md navbar-light bg-secondary fixed-right" id="fsdocs-nav">
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse navbar-nav-scroll" id="navbarsExampleDefault">
            <a href="/Owin.Compression/"><img id="fsdocs-logo" src="https://github.com/Thorium/Owin.Compression/raw/master/docs/files/img/logo.png" /></a>
            <!-- BEGIN SEARCH BOX: this adds support for the search box -->
            <div id="header">
                <div class="searchbox" id="fsdocs-searchbox">
                    <label for="search-by">
                        <i class="fas fa-search"></i>
                    </label>
                    <input data-search-input="" id="search-by" type="search" placeholder="Search..." />
                    <span data-search-clear="">
                        <i class="fas fa-times"></i>
                    </span>
                </div>
            </div>

            <!-- END SEARCH BOX: this adds support for the search box -->
            <ul class="navbar-nav">
                <li class="nav-header">Links</li>
                <li class="nav-item" id="fsdocs-license-link"><a class="nav-link" href="{{fsdocs-license-link}}">License</a></li>
                <li class="nav-item" id="fsdocs-release-notes-link"><a class="nav-link" href="{{fsdocs-release-notes-link}}">Release Notes</a></li>
                <li class="nav-item" id="fsdocs-repository-link"><a class="nav-link" href="https://github.com/Thorium/Owin.Compression">Source Repository</a></li>
                <li class="nav-header">
  Documentation
</li>             
<li class="nav-item">
  <a class="nav-link" href="/Owin.Compression/license.html">
    license
  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="/Owin.Compression/release-notes.html">
    release-notes
  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="/Owin.Compression/tutorial.html">
    Using this library (C-Sharp)

  </a>
</li>
                -
            </ul>
        </div>
    </nav>
    <div class="container">
        <div class="masthead">
            <h3 class="muted"><a href="/Owin.Compression/">Owin.Compression</a></h3>
        </div>
        <hr />
        <div class="container" id="fsdocs-content">
            <h1><a name="Using-this-library-C-Sharp" class="anchor" href="#Using-this-library-C-Sharp">Using this library (C-Sharp)</a></h1>
<p>Create new C# console application project (.NET 4.5 or more). Add reference to NuGet-packages:</p>
<ul>
<li>Microsoft.Owin</li>
<li>Microsoft.Owin.Hosting</li>
<li>Microsoft.Owin.Host.HttpListener</li>
<li>Owin.Compression (this package)</li>
</ul>
<p>Then write the program, e.g.:</p>
<table class="pre"><tr><td class="snippet"><pre class="fssnip highlighted"><code lang="csharp">  <span class="k">using</span> System;
  <span class="k">using</span> Owin;
  [assembly: Microsoft.Owin.OwinStartup(<span class="k">typeof</span>(MyServer.MyWebStartup))]
  <span class="k">namespace</span> MyServer
  {
    <span class="k">class</span> MyWebStartup
    {
      <span class="k">public</span> <span class="k">void</span> Configuration(Owin.IAppBuilder app)
      {
        <span class="k">var</span> settings <span class="o">=</span> OwinCompression.DefaultCompressionSettingsWithPath(<span class="s">@"c:\temp\");
        //or var settings = new CompressionSettings( ... )
        app.MapCompressionModule("</span>/zipped<span class="s">", settings);
      }
    }

    class Program
    {
      static void Main(string[] args)
      {
        Microsoft.Owin.Hosting.WebApp.Start&lt;MyWebStartup&gt;("</span>http:<span class="c">//*:8080");</span>
        Console.WriteLine(<span class="s">"Server started... Press enter to exit."</span>);
        Console.ReadLine();
      }
    }
  }
</code></pre></td></tr></table>
<p>Have a large text file in your temp-folder, c:\temp\test\mytempfile.txt</p>
<p>Now, run the program (F5) and start a browser to address:</p>
<p><a href="http://localhost:8080/zipped/test/mytempfile.txt">http://localhost:8080/zipped/test/mytempfile.txt</a></p>
<p>Observe that the file is transfered as compressed but the browser will automatically decompress the traffic.</p>
<h3><a name="Corresponding-code-with-F-Sharp" class="anchor" href="#Corresponding-code-with-F-Sharp">Corresponding code with F-Sharp</a></h3>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="pp">#r</span> <span class="s">&quot;Owin.dll&quot;</span>
<span class="pp">#r</span> <span class="s">&quot;Microsoft.Owin.dll&quot;</span>
<span class="pp">#r</span> <span class="s">&quot;Microsoft.Owin.Hosting.dll&quot;</span>
<span class="pp">#r</span> <span class="s">&quot;System.Configuration.dll&quot;</span>
<span class="pp">#r</span> <span class="s">&quot;Owin.Compression.dll&quot;</span>

<span class="k">open</span> <span onmouseout="hideTip(event, 'fs1', 1)" onmouseover="showTip(event, 'fs1', 1)" class="id">Owin</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs2', 2)" onmouseover="showTip(event, 'fs2', 2)" class="id">System</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs3', 3)" onmouseover="showTip(event, 'fs3', 3)" class="id">serverPath</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs2', 4)" onmouseover="showTip(event, 'fs2', 4)" class="id">System</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs4', 5)" onmouseover="showTip(event, 'fs4', 5)" class="id">Configuration</span><span class="pn">.</span><span class="id">ConfigurationManager</span><span class="pn">.</span><span class="id">AppSettings</span><span class="pn">.</span><span class="pn">[</span><span class="s">&quot;WwwRoot&quot;</span><span class="pn">]</span>

<span class="k">type</span> <span onmouseout="hideTip(event, 'fs5', 6)" onmouseover="showTip(event, 'fs5', 6)" class="rt">MyWebStartup</span><span class="pn">(</span><span class="pn">)</span> <span class="o">=</span>
    <span class="k">member</span> <span class="id">__</span><span class="pn">.</span><span class="fn">Configuration</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs6', 7)" onmouseover="showTip(event, 'fs6', 7)" class="fn">app</span><span class="pn">:</span><span onmouseout="hideTip(event, 'fs1', 8)" onmouseover="showTip(event, 'fs1', 8)" class="id">Owin</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs7', 9)" onmouseover="showTip(event, 'fs7', 9)" class="id">IAppBuilder</span><span class="pn">)</span> <span class="o">=</span>
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs8', 10)" onmouseover="showTip(event, 'fs8', 10)" class="fn">compressionSetting</span> <span class="o">=</span> 
            <span class="pn">{</span><span class="id">OwinCompression</span><span class="pn">.</span><span class="id">DefaultCompressionSettings</span> <span class="k">with</span> 
                <span class="id">ServerPath</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs3', 11)" onmouseover="showTip(event, 'fs3', 11)" class="id">serverPath</span><span class="pn">;</span> 
                <span class="id">CacheExpireTime</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs9', 12)" onmouseover="showTip(event, 'fs9', 12)" class="id">Some</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs10', 13)" onmouseover="showTip(event, 'fs10', 13)" class="id">DateTimeOffset</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs11', 14)" onmouseover="showTip(event, 'fs11', 14)" class="id">Now</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs12', 15)" onmouseover="showTip(event, 'fs12', 15)" class="id">AddDays</span> <span class="n">7.</span><span class="pn">)</span> <span class="pn">}</span>
        <span onmouseout="hideTip(event, 'fs6', 16)" onmouseover="showTip(event, 'fs6', 16)" class="fn">app</span><span class="pn">.</span><span class="id">MapCompressionModule</span><span class="pn">(</span><span class="s">&quot;/zipped&quot;</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs8', 17)" onmouseover="showTip(event, 'fs8', 17)" class="id">compressionSetting</span><span class="pn">)</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs13', 18)" onmouseover="showTip(event, 'fs13', 18)" class="fn">ignore</span> 
        <span class="pn">(</span><span class="pn">)</span>

<span class="pn">[&lt;</span><span class="id">assembly</span><span class="pn">:</span> <span onmouseout="hideTip(event, 'fs14', 19)" onmouseover="showTip(event, 'fs14', 19)" class="id">Microsoft</span><span class="pn">.</span><span class="id">Owin</span><span class="pn">.</span><span class="id">OwinStartup</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs15', 20)" onmouseover="showTip(event, 'fs15', 20)" class="id">typeof</span><span class="pn">&lt;</span><span onmouseout="hideTip(event, 'fs5', 21)" onmouseover="showTip(event, 'fs5', 21)" class="id">MyWebStartup</span><span class="pn">&gt;</span><span class="pn">)</span><span class="pn">&gt;]</span>
<span class="k">do</span><span class="pn">(</span><span class="pn">)</span>

<span class="c">// and then...</span>

<span onmouseout="hideTip(event, 'fs14', 22)" onmouseover="showTip(event, 'fs14', 22)" class="id">Microsoft</span><span class="pn">.</span><span class="id">Owin</span><span class="pn">.</span><span class="id">Hosting</span><span class="pn">.</span><span class="id">WebApp</span><span class="pn">.</span><span class="id">Start</span><span class="pn">&lt;</span><span onmouseout="hideTip(event, 'fs5', 23)" onmouseover="showTip(event, 'fs5', 23)" class="id">MyWebStartup</span><span class="pn">&gt;</span> <span class="s">&quot;http://*:8080&quot;</span>
</code></pre>
<p>Or you can use app.UseCompressionModule() in the beginning of the configuration to compress the whole response.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span onmouseout="hideTip(event, 'fs16', 24)" onmouseover="showTip(event, 'fs16', 24)" class="rt">MyWebStartupExample2</span><span class="pn">(</span><span class="pn">)</span> <span class="o">=</span>
    <span class="k">member</span> <span class="id">__</span><span class="pn">.</span><span class="fn">Configuration</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs6', 25)" onmouseover="showTip(event, 'fs6', 25)" class="fn">app</span><span class="pn">:</span><span onmouseout="hideTip(event, 'fs1', 26)" onmouseover="showTip(event, 'fs1', 26)" class="id">Owin</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs7', 27)" onmouseover="showTip(event, 'fs7', 27)" class="id">IAppBuilder</span><span class="pn">)</span> <span class="o">=</span>
        <span onmouseout="hideTip(event, 'fs6', 28)" onmouseover="showTip(event, 'fs6', 28)" class="fn">app</span><span class="pn">.</span><span class="id">UseCompressionModule</span><span class="pn">(</span><span class="pn">)</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs13', 29)" onmouseover="showTip(event, 'fs13', 29)" class="fn">ignore</span>
        
        <span class="c">//app.MapSignalR(hubConfig)</span>
        <span class="c">//app.UseFileServer(fileServerOptions) |&gt; ignore</span>
        <span class="c">//etc...</span>

        <span class="pn">(</span><span class="pn">)</span>
</code></pre>

            <div class="fsdocs-tip" id="fs1">namespace Owin</div>
<div class="fsdocs-tip" id="fs2">namespace System</div>
<div class="fsdocs-tip" id="fs3">val serverPath: obj</div>
<div class="fsdocs-tip" id="fs4">namespace System.Configuration</div>
<div class="fsdocs-tip" id="fs5">Multiple items<br />type MyWebStartup =
  new: unit -&gt; MyWebStartup
  member Configuration: app: IAppBuilder -&gt; unit<br /><br />--------------------<br />new: unit -&gt; MyWebStartup</div>
<div class="fsdocs-tip" id="fs6">val app: IAppBuilder</div>
<div class="fsdocs-tip" id="fs7">type IAppBuilder =
  member Build: returnType: Type -&gt; obj
  member New: unit -&gt; IAppBuilder
  member Use: middleware: obj * [&lt;ParamArray&gt;] args: obj[] -&gt; IAppBuilder
  member Properties: IDictionary&lt;string,obj&gt;</div>
<div class="fsdocs-tip" id="fs8">val compressionSetting: obj</div>
<div class="fsdocs-tip" id="fs9">union case Option.Some: Value: &#39;T -&gt; Option&lt;&#39;T&gt;<br /><em>&lt;summary&gt;The representation of &quot;Value of type &#39;T&quot;&lt;/summary&gt;<br />&lt;param name=&quot;Value&quot;&gt;The input value.&lt;/param&gt;<br />&lt;returns&gt;An option representing the value.&lt;/returns&gt;</em></div>
<div class="fsdocs-tip" id="fs10">Multiple items<br />[&lt;Struct&gt;]
type DateTimeOffset =
  new: dateTime: DateTime -&gt; unit + 7 overloads
  member Add: timeSpan: TimeSpan -&gt; DateTimeOffset
  member AddDays: days: float -&gt; DateTimeOffset
  member AddHours: hours: float -&gt; DateTimeOffset
  member AddMicroseconds: microseconds: float -&gt; DateTimeOffset
  member AddMilliseconds: milliseconds: float -&gt; DateTimeOffset
  member AddMinutes: minutes: float -&gt; DateTimeOffset
  member AddMonths: months: int -&gt; DateTimeOffset
  member AddSeconds: seconds: float -&gt; DateTimeOffset
  member AddTicks: ticks: int64 -&gt; DateTimeOffset
  ...<br /><em>&lt;summary&gt;Represents a point in time, typically expressed as a date and time of day, relative to Coordinated Universal Time (UTC).&lt;/summary&gt;</em><br /><br />--------------------<br />DateTimeOffset ()<br />DateTimeOffset(dateTime: DateTime) : DateTimeOffset<br />DateTimeOffset(dateTime: DateTime, offset: TimeSpan) : DateTimeOffset<br />DateTimeOffset(ticks: int64, offset: TimeSpan) : DateTimeOffset<br />DateTimeOffset(year: int, month: int, day: int, hour: int, minute: int, second: int, offset: TimeSpan) : DateTimeOffset<br />DateTimeOffset(year: int, month: int, day: int, hour: int, minute: int, second: int, millisecond: int, offset: TimeSpan) : DateTimeOffset<br />DateTimeOffset(year: int, month: int, day: int, hour: int, minute: int, second: int, millisecond: int, calendar: Globalization.Calendar, offset: TimeSpan) : DateTimeOffset<br />DateTimeOffset(year: int, month: int, day: int, hour: int, minute: int, second: int, millisecond: int, microsecond: int, offset: TimeSpan) : DateTimeOffset<br />DateTimeOffset(year: int, month: int, day: int, hour: int, minute: int, second: int, millisecond: int, microsecond: int, calendar: Globalization.Calendar, offset: TimeSpan) : DateTimeOffset</div>
<div class="fsdocs-tip" id="fs11">property DateTimeOffset.Now: DateTimeOffset with get<br /><em>&lt;summary&gt;Gets a &lt;see cref=&quot;T:System.DateTimeOffset&quot; /&gt; object that is set to the current date and time on the current computer, with the offset set to the local time&#39;s offset from Coordinated Universal Time (UTC).&lt;/summary&gt;<br />&lt;returns&gt;A &lt;see cref=&quot;T:System.DateTimeOffset&quot; /&gt; object whose date and time is the current local time and whose offset is the local time zone&#39;s offset from Coordinated Universal Time (UTC).&lt;/returns&gt;</em></div>
<div class="fsdocs-tip" id="fs12">DateTimeOffset.AddDays(days: float) : DateTimeOffset</div>
<div class="fsdocs-tip" id="fs13">val ignore: value: &#39;T -&gt; unit<br /><em>&lt;summary&gt;Ignore the passed value. This is often used to throw away results of a computation.&lt;/summary&gt;<br />&lt;param name=&quot;value&quot;&gt;The value to ignore.&lt;/param&gt;<br />&lt;example id=&quot;min-example&quot;&gt;&lt;code lang=&quot;fsharp&quot;&gt;
  ignore 55555   //  Evaluates to ()
 &lt;/code&gt;&lt;/example&gt;</em></div>
<div class="fsdocs-tip" id="fs14">namespace Microsoft</div>
<div class="fsdocs-tip" id="fs15">val typeof&lt;&#39;T&gt; : Type<br /><em>&lt;summary&gt;Generate a System.Type runtime representation of a static type.&lt;/summary&gt;<br />&lt;example id=&quot;typeof-example&quot;&gt;&lt;code lang=&quot;fsharp&quot;&gt;
 let t = typeof&amp;lt;int&amp;gt;  // Gets the System.Type
 t.FullName                 // Evaluates to &quot;System.Int32&quot;
 &lt;/code&gt;&lt;/example&gt;</em></div>
<div class="fsdocs-tip" id="fs16">Multiple items<br />type MyWebStartupExample2 =
  new: unit -&gt; MyWebStartupExample2
  member Configuration: app: IAppBuilder -&gt; unit<br /><br />--------------------<br />new: unit -&gt; MyWebStartupExample2</div>

        </div>

        <!-- BEGIN SEARCH BOX: this adds support for the search box -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/JavaScript-autoComplete/1.0.4/auto-complete.css" />
        <script type="text/javascript">var fsdocs_search_baseurl = '/Owin.Compression/';</script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/lunr.js/2.3.8/lunr.min.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/JavaScript-autoComplete/1.0.4/auto-complete.min.js"></script>
        <script type="text/javascript" src="/Owin.Compression/content/fsdocs-search.js"></script>
        <!-- END SEARCH BOX: this adds support for the search box -->
    </div>
</body>

</html>